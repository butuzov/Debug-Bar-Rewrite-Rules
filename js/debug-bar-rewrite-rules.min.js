!function(t){t(function(){var e={settings:{},ajax:function(){t(".debug-bar-rewrites-urls a").bind("click",function(e){e.preventDefault,t(this).find(".spinner").css({visibility:"visible"});var i=this;t.post($this.settings.ajaxurl,{action:"debug_bar_rewrite_rules",nonce:$this.settings.nonce},function(e){t(i).find(".spinner").css({visibility:"hidden"}),t.each(["rules","filters"],function(i,s){"underfined"!=typeof e[s]&&t(".dbrr."+s).length>0&&t(".dbrr."+s).html(t("table",t(e[s])).parent().html())}),t.each(["rules","filters_hooked","filters"],function(i,s){"underfined"!=typeof e["count_"+s]&&t("h2.dbrr_count_"+s+" i").length>0&&t("h2.dbrr_count_"+s+" i").text(e["count_"+s])})},"json")})},test:function(){t(".mono.domain").bind("click",function(){t(".mono.search").focus()}).trigger("click"),t(".mono.search").bind("focus",function(){t(this).parent().addClass("active"),t(".dbrr.rules table thead tr th.col-match").length||(t("<th/>").addClass("col-match").css("width","30%").text($this.settings.matches).appendTo(t(".dbrr.rules table thead tr")).parent().find("th.col-data").css("width","35%"),t("<td/>").addClass("col-match").html(" ").appendTo(t(".dbrr.rules table tbody tr")))}).bind("blur",function(){""==t.trim(t(this).val())&&t(".col-match").length&&(t(this).parent().removeClass("active"),t(".col-match").remove())}).bind("keyup",$this._filter_match).bind("keyup",$this._filter_sarched).bind("focus",$this._filter_match).bind("focus",$this._filter_sarched)},calc_domain_width:function(){t("div.filterui input.mono.domain").is(":visible")&&(t(".filterui .url").append('<span class="mono domain">'+t("div.filterui .mono.domain").val()+"</span>"),t("div.filterui input.mono.domain").css("width",t("div.filterui span.mono.domain").width()+3),t("div.filterui span.mono.domain").remove(),clearInterval($this.calc_domain_width_timeout),$this.calc_domain_width_timeout=0)},search:function(){$this.calc_domain_width_timeout=window.setInterval($this.calc_domain_width,1e3),$this.calc_domain_width(),t(".mono.matches").bind("focus",function(){t("div.filterui .url.active").removeClass("active"),t(".dbrr.rules table \t\ttr   .col-match").remove(),t(".dbrr.rules table thead tr th.col-data").css({width:"50%"})}).bind("keyup",$this._search_for_match)},_search_for_match:function(e){var i=e.keyCode||e.which;[32,37,38,39,40].indexOf(i)>-1||(13==i&&e.preventDefault(),$this.match=t.trim(t(this).val()),$this._table_reset(t(".dbrr.rules table")),""!=$this.match&&t(".dbrr.rules table tbody tr").each(function(){t(this).text().indexOf($this.match)==-1?t(this).addClass("hidden"):t("td",this).each(function(){t(this).html(t(this).text().replace($this.match,"<span>"+$this.match+"</span>"))})}))},_filter_match:function(e){$el=t(this),"undefined"==typeof $this.base&&($this.base=$this.parse_url($this.settings.home));var i=e.keyCode||e.which;if(!([32,37,38,39,40,91].indexOf(i)>-1)){13==i&&""!=t.trim($el.val())&&e.preventDefault();var s=$this.parse_url(t(this).val());jQuery.each(["scheme","://","host","port","path"],function(t,e){val=o=$el.val().split("?")[0].split("#")[0],"string"==typeof s[e]&&s[e]===$this.base[e]&&val.indexOf(s[e])!=-1?val=val.substring(val.indexOf(s[e])+s[e].length):"://"==e&&val.indexOf(e)!=-1?val=val.substring(val.indexOf(e)+e.length):"path"==e&&0==val.indexOf($this.base[e])&&(val=val.substring(val.indexOf($this.base[e])+$this.base[e].length)),"path"==e&&"/"==val.substring(0,1)&&(val=val.substring(1,val.length)),$el.val(o!=jQuery.trim(val)?jQuery.trim(val):o)})}},_filter_sarched:function(e){$el=t(this);var i=e.keyCode||e.which;[32,37,38,39,40,91].indexOf(i)>-1||(13==i&&""!=t.trim($el.val())&&e.preventDefault(),$this._table_reset(t(".dbrr.rules table")),t(".dbrr.rules table tbody tr").each(function(){t("td:eq(0), td:eq(1)",t(this)).each(function(){jQuery(this).html(t(this).text())}),t("td:eq(2)",t(this)).html("")}),""!=t.trim($el.val())&&("undefined"==typeof $this.rules&&($this.rules={},t(".dbrr.rules table tbody tr").each(function(){$this.rules[t(this).attr("id")]={rule:t("td:eq(0)",t(this)).text(),match:t("td:eq(1)",t(this)).text()}})),jQuery.ajax({url:$this.settings.validator,crossDomain:!0,dataType:"json",type:"POST",data:{rules:$this.rules,search:$el.val()}}).done(function(e){t("#debug").html(e),$this._table_reset(t(".dbrr.rules table")),t(".dbrr.rules").each(function(){t("table tbody tr",this).each(function(i){0==e.rules[i+1].result?jQuery(this).addClass("hidden"):($this.currentRow=this,"undefined"!=typeof e.rules[i+1].vars&&t.each(e.rules[i+1].vars,function(t,e){jQuery("td:eq(2)",$this.currentRow).append("<div><strong>"+t+"</strong> : "+e+"</div>")}))})}),$this._table_zebra(t(".dbrr.rules table"))})))},_table_reset:function(e){return t("tbody tr",e).removeClass("alt hidden").each(function(){t("td",t(this)).each(function(){t(this).html(t(this).text())})}),$this._table_zebra(e)},_table_zebra:function(e){return t("tbody tr",e).filter(":visible").each(function(e){t(this).addClass((e+2)%2==0?"alt":"_")}),$this},parse_url:function(t,e){var i=document.createElement("a");"/"!=t.substring(0,1)&&"http"!=t.substring(0,4)&&(t="/"+t),i.href=t;var s=/(\/\/)(.+?)((:(.+?))?)@/i;if(s.exec(t)){var a=s.exec(t);"string"==typeof a[2]&&a[2].length>0&&(i.user=a[2]),"string"==typeof a[5]&&a[5].length>0&&(i.pass=a[5])}var r=new Object,n=["scheme","host","port","user","pass","path","query","fragment"],h=["protocol","hostname","port","user","pass","pathname","search","hash"];return h.forEach(function(t,e){if("string"==typeof i[t]&&i[t].length>0)switch(t){case"protocol":r[n[e]]=i[t].replace(":","");break;case"hash":r[n[e]]=i[t].replace("#","");break;case"pathname":"/"!=i[t]&&(r[n[e]]=i[t]);break;default:r[n[e]]=i[t]}}),r},intialize:function(t){return $this=this,$this.settings=t,$this.ajax(),$this.search(),$this.test()}};e.intialize(debugBarRewriteRules)})}(jQuery);